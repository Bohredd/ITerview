import{r,j as e,u as C}from"./index-oLRZV56Y.js";import{u}from"./FetchData-CeJWyWSx.js";import{C as g}from"./Card-CrlYdYbp.js";import{j as A,k as D,l as T,h as k,C as S,a as P}from"./Navbar-Dnyz2665.js";import{B as p}from"./Button-DiQE_urz.js";import{L as I,T as F}from"./ListenPerson-74idL2kz.js";import{a as w}from"./index-Br0q4W-C.js";import{R as G}from"./Row-CT8KO0ps.js";import{C as B}from"./Col-D3TImVBo.js";const Y=({personId:n})=>{const[s,o]=r.useState(null),[i,a]=r.useState(!0),[t,l]=r.useState(null);return u({method:"GET",app_name:"dailies",url:"person/",id:n,setData:o,setLoading:a,setError:l}),i?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:t}):s?e.jsx("div",{className:`person-frame-${s.id}`,style:{width:"14rem",margin:"auto"},children:e.jsxs(g,{style:{width:"14rem",height:"18rem"},children:[e.jsx(g.Img,{variant:"top",src:s.image,alt:s.name,style:{width:"100%",height:"50%",objectFit:"cover"}}),e.jsxs(g.Body,{className:"text-center",children:[e.jsx(g.Title,{children:s.name}),e.jsx(g.Text,{children:s.role})]})]})}):e.jsx("div",{children:"No person found"})},U=({peopleId:n})=>e.jsxs("div",{children:[e.jsx("div",{className:"d-flex justify-content-center pt-1 pb-1",children:n.map(s=>e.jsx(Y,{personId:s},s))}),e.jsx("div",{className:"d-flex justify-content-center pt-1 pb-1",children:e.jsxs("div",{className:"d-flex justify-content-center mt-2",children:[e.jsx(p,{className:"mx-2",variant:"primary",children:e.jsx(A,{className:"mx-2",size:24})}),e.jsx(p,{className:"mx-2",variant:"secondary",children:e.jsx(D,{className:"mx-2",size:24})}),e.jsx(p,{className:"mx-2",variant:"danger",children:e.jsx(T,{className:"mx-2",size:24})})]})})]}),R=({informationId:n})=>{const[s,o]=r.useState(void 0),[i,a]=r.useState(!0),[t,l]=r.useState(null);return u({method:"GET",app_name:"dailies",url:"information/",id:n,setData:o,setLoading:a,setError:l}),i?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:t}):s?(console.log(s),e.jsxs("div",{children:[e.jsx("h3",{children:s.title}),e.jsx("p",{children:s.content})]})):e.jsx("div",{children:"No information found"})},V=({probablyAnswerId:n})=>{const[s,o]=r.useState(null),[i,a]=r.useState(!0),[t,l]=r.useState(null);return u({method:"GET",app_name:"dailies",url:"probably_answer/",id:n,setData:o,setLoading:a,setError:l}),i?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:t}):s?(console.log(s),e.jsx("div",{children:e.jsx("h3",{children:s.answer})})):e.jsx("div",{children:"No probably answer found"})},z=({answersId:n})=>e.jsx("div",{children:n.map(s=>e.jsx(V,{probablyAnswerId:s},s))}),M=({correctAnswerId:n})=>{const[s,o]=r.useState(!0),[i,a]=r.useState(null),[t,l]=r.useState(null),[c,d]=r.useState(!1),[h,y]=r.useState(null),[m,x]=r.useState(null),[j,b]=r.useState(null);if(console.log("Correct answer id: ",n),u({method:"GET",app_name:"dailies",url:"probably_answer/",id:n,setData:l,setLoading:o,setError:a}),s)return e.jsx("div",{children:"Loading..."});if(i)return e.jsx("div",{children:i});if(!t)return e.jsx("div",{children:"No probably answer found"});console.log("probablyAnswer: ",t);const N=()=>{try{d(!0);const f=I("en-US");x(f),f.onresult=v=>{const L=v.resultIndex,E=v.results[L][0].transcript;y(E)},f.start()}catch(f){console.log("error: ",f)}},_=()=>{m&&m.stop(),h&&(b(h.toLowerCase()===t.answer.toLowerCase()),console.log("Is correct: ",h===t.answer),d(!1))};return e.jsxs("div",{children:[h&&e.jsxs("h3",{children:["Your answer: ",h]}),j!==null&&e.jsx("h3",{children:j?"Correct":"Incorrect"}),e.jsx(p,{variant:"primary",onClick:N,children:"Answer"}),e.jsx(p,{variant:"primary",onClick:_,disabled:!c,children:"Stop answering"})]})},Q=({speechId:n})=>{const[s,o]=r.useState(null),[i,a]=r.useState(!0),[t,l]=r.useState(null),[c,d]=r.useState(null);return u({method:"GET",app_name:"dailies",url:"speech/",id:n,setData:o,setLoading:a,setError:l}),u({method:"GET",app_name:"dailies",url:"correct_answer/",id:n,setData:d,setLoading:a,setError:l}),i?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:t}):s?c?(console.log("correct probably answer: ",c.probably_answers),e.jsxs("div",{children:[s.information&&e.jsx(R,{informationId:s.information}),e.jsx(z,{answersId:s.probably_answers}),e.jsx(M,{correctAnswerId:c.probably_answers[0]})]})):e.jsx("div",{children:"No probably answer found"}):e.jsx("div",{children:"No speech found"})},q=({speech:n})=>{const[s,o]=r.useState(null),[i,a]=r.useState(!0),[t,l]=r.useState(null);if(u({method:"GET",app_name:"dailies",url:"person/",id:n==null?void 0:n.speaker,setData:o,setLoading:a,setError:l}),i)return e.jsx("div",{children:"Loading..."});if(t)return e.jsx("div",{children:t});if(!s)return e.jsx("div",{children:"No person found"});const c=()=>{F(n.content,s==null?void 0:s.voice)};return console.log("person voice : ",s==null?void 0:s.voice),e.jsx("div",{children:e.jsx(p,{onClick:c,className:"mt-2 mb-2",children:e.jsx(k,{})})})},X=({personId:n})=>{const[s,o]=r.useState(null),[i,a]=r.useState(!0),[t,l]=r.useState(null);return u({method:"GET",app_name:"dailies",url:"person/",id:n,setData:o,setLoading:a,setError:l}),i?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:t}):s?e.jsx("div",{children:e.jsxs("p",{children:["Actual speaker is ",e.jsx("span",{className:"fw-bold",children:s.name})]})}):e.jsx("div",{children:"No person found"})},$=({speechId:n})=>{const[s,o]=r.useState(null),[i,a]=r.useState(!0),[t,l]=r.useState(null);return u({method:"GET",app_name:"dailies",url:"speech/",id:n,setData:o,setLoading:a,setError:l}),i?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:t}):s?e.jsxs("div",{className:"d-flex justify-content-center align-items-center flex-column",children:[e.jsxs("h4",{children:["Actual speech said : ",s.content]}),e.jsx(X,{personId:s.speaker}),e.jsx(q,{speech:s}),s.is_question&&s.is_to_you&&e.jsx(Q,{speechId:n})]}):e.jsx("div",{children:"No speech found"})},H=({speechesId:n})=>{const[s,o]=r.useState(0),i=()=>{s<n.length-1&&o(s+1)},a=()=>{s>0&&o(s-1)};return e.jsxs("div",{children:[e.jsx($,{speechId:n[s]}),e.jsx(S,{className:"d-flex justify-content-center",children:e.jsxs("div",{children:[e.jsx(p,{onClick:a,className:"me-2",children:"Previous"}),e.jsx(p,{onClick:i,children:"Next"})]})})]})},J=({youId:n,daily:s})=>{const[o,i]=r.useState(null),[a,t]=r.useState(!0),[l,c]=r.useState(null);return u({method:"GET",app_name:"dailies",url:"person/",id:n,setData:i,setLoading:t,setError:c}),a?e.jsx("div",{children:"Loading..."}):l?e.jsx("div",{children:l}):o?e.jsxs("div",{children:[e.jsxs("p",{children:["You are ",e.jsxs("span",{className:"fw-bold",children:[" ",o.name," "]})," and you work as a",e.jsxs("span",{className:"fw-bold",children:[" ",o.role," "]})]}),e.jsxs("p",{children:["Your atributions are ",e.jsxs("span",{className:"fw-bold",children:[" ",s.your_atributions," "]})]})]}):e.jsx("div",{children:"No person found"})},oe=()=>{const{id:n}=C(),[s,o]=r.useState(null),[i,a]=r.useState(!0),[t,l]=r.useState(null),[c,d]=r.useState(null),h=localStorage.getItem("authToken");u({method:"GET",app_name:"dailies",url:"daily/",id:n,setData:o,setLoading:a,setError:l}),console.log("userToken",h);async function y(){try{const m={user_token:h,game_name:"Fake Daily Meeting"},x=await w.post("http://127.0.0.1:8000/payment/api/can_play_game/",m);console.log("response",x),x.status!==200?d(!1):d(!0)}catch(m){console.error("Error checking can play interview:",m),d(!1)}}return r.useEffect(()=>{if(y(),console.log("montado"),c===!0){async function m(){try{const x={user_token:h,game_name:"Fake Daily Meeting"},j=await w.post("http://127.0.0.1:8000/payment/api/discount_game_usage/",x);console.log("response",j),j.status!==200?d(!1):(console.log("consumação -1"),d(!0))}catch(x){console.error("Error checking can play interview:",x),d(!1)}}m()}},[s]),c?i?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{children:t}):s?(console.log(s),console.log(n),console.log(s.people),e.jsxs(e.Fragment,{children:[e.jsx(P,{}),e.jsx("div",{children:e.jsxs(S,{className:"d-flex flex-column align-items-center pt-5 pb-5",children:[e.jsxs("h1",{className:"text-center mb-4",children:["Daily ",s.project_name," Team"]}),e.jsxs("p",{children:["Scrum master started the daily at:"," ",new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"})]}),e.jsx(J,{youId:s.you,daily:s}),e.jsx(G,{className:"justify-content-center w-100",children:e.jsxs(B,{md:8,className:"d-flex flex-column align-items-center",children:[e.jsx(U,{peopleId:s.people}),e.jsx(H,{speechesId:s.speeches})]})})]})})]})):e.jsx("div",{children:"No daily found"}):e.jsx("div",{children:"You have reached your daily meetings limit per month"})};export{oe as DailyView,oe as default};

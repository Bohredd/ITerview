import{r as a,a as S,j as e}from"./index-oLRZV56Y.js";import{B as p}from"./Button-DiQE_urz.js";import{F as s}from"./Form-BQaihP3E.js";import{a as b}from"./Navbar-Dnyz2665.js";import"./Col-D3TImVBo.js";const N=()=>{const[i,x]=a.useState(""),[c,g]=a.useState(""),[d,r]=a.useState(null),[m,u]=a.useState(!1),[f,n]=a.useState(!1),{setIsAuthenticated:j}=S(),w=t=>{x(t.target.value)},y=t=>{g(t.target.value)},v=async t=>{t.preventDefault(),u(!0),r(null);try{const o=await fetch("https://0.0.0.0:8000/user/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:c})});if(o.ok){const l=(await o.json()).token;l?(localStorage.setItem("authToken",l),n(!0),j(!0),console.log("Login successful!"),console.log("Token stored: ",l),window.location.href="/cart"):r("Unexpected response: Token not found.")}else{const h=await o.json();r(h.message||"Invalid email or password."),n(!1)}}catch{r("Network error, please try again."),n(!1)}finally{u(!1)}};return e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"70vh"},children:e.jsxs("div",{className:"w-100",style:{maxWidth:"400px",marginTop:"5vh"},children:[e.jsxs(s,{onSubmit:v,children:[e.jsxs(s.Group,{className:"mb-3",controlId:"formBasicEmail",children:[e.jsx(s.Label,{children:"Email address"}),e.jsx(s.Control,{type:"email",placeholder:"Enter email",value:i,onChange:w,required:!0}),e.jsx(s.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"formBasicPassword",children:[e.jsx(s.Label,{children:"Password"}),e.jsx(s.Control,{type:"password",placeholder:"Password",value:c,onChange:y,required:!0})]}),d&&e.jsx("div",{style:{color:"red"},children:d}),f&&e.jsx("div",{style:{color:"green"},children:"Login successful!"}),e.jsx(p,{variant:"primary",type:"submit",disabled:m,className:"w-100",children:m?"Logging in...":"Submit"})]}),e.jsx("div",{className:"mt-3 text-center",children:e.jsx(p,{variant:"link",className:"text-primary",href:"/forgot-password",children:"Forgot Password?"})})]})})},T=()=>e.jsxs(e.Fragment,{children:[e.jsx(b,{}),e.jsx(N,{})]});export{T as LoginUser,T as default};
